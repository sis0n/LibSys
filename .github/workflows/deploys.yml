name: ğŸš€ Deploy to Hostinger via FTP

on:
Â  push:
Â  Â  branches:
Â  Â  Â  - main
Â  workflow_dispatch:

jobs:
Â  deploy:
Â  Â  runs-on: ubuntu-latest

Â  Â  steps:
Â  Â  Â  - name: ğŸ“¥ Checkout repository
Â  Â  Â  Â  uses: actions/checkout@v4

Â  Â  Â  # 1. I-se-setup ang PHP
Â  Â  Â  - name: ğŸ˜ Setup PHP
Â  Â  Â  Â  uses: shivammathur/setup-php@v2
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â  php-version: '8.2'
Â  Â  Â  Â  Â  extensions: mbstring, pdo, pdo_mysql, gd, intl, bcmath # Dinagdagan ko na ng common extensions
Â  Â  Â  Â  Â  coverage: none

Â  Â  Â  # 2. I-ka-cache ang vendor folder para mas mabilis sa susunod
Â  Â  Â  - name: âš¡ Cache Composer dependencies
Â  Â  Â  Â  uses: actions/cache@v3
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â  path: vendor
Â  Â  Â  Â  Â  key: ${{ runner.os }}-composer-${{ hashFiles('**/composer.lock') }}
Â  Â  Â  Â  Â  restore-keys: |
Â  Â  Â  Â  Â  Â  ${{ runner.os }}-composer-

Â  Â  Â  # 3. Ito ang gagawa ng buong 'vendor' folder mo
Â  Â  Â  - name: ğŸ“¦ Install Composer Dependencies
Â  Â  Â  Â  run: composer install --no-dev --prefer-dist -o

Â  Â  Â  # 4. I-a-upload ang backend files (src, vendor, composer, etc.) sa BASE PATH
Â  Â  Â  - name: ğŸ“¤ Upload Backend Files (Outside public_html)
Â  Â  Â  Â  uses: SamKirkland/FTP-Deploy-Action@v4.3.5
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â  server: ${{ secrets.FTP_SERVER }}
Â  Â  Â  Â  Â  username: ${{ secrets.FTP_USERNAME }}
Â  Â  Â  Â  Â  password: ${{ secrets.FTP_PASSWORD }}
Â  Â  Â  Â  Â  port: ${{ secrets.FTP_PORT }}
Â  Â  Â  Â  Â  protocol: ftp
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  # Kukunin lahat ng files
Â  Â  Â  Â  Â  local-dir: ./
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  # Ito 'yung "base path" mo, aakyat ng isang level mula sa public_html
Â  Â  Â  Â  Â  # (Assuming na ang FTP_PATH secret mo ay /public_html)
Â  Â  Â  Â  Â  server-dir: ${{ secrets.FTP_PATH }}/../
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  # Hindi isasama ang mga 'to, lalo na ang 'public' folder
Â  Â  Â  Â  Â  exclude: |
Â  Â  Â  Â  Â  Â  **/.git*
Â  Â  Â  Â  Â  Â  **/.github*
Â  Â  Â  Â  Â  Â  .env
Â  Â  Â  Â  Â  Â  node_modules/**
Â  Â  Â  Â  Â  Â  public/** Â  Â  Â  # 5. I-a-upload ang frontend files (loob ng 'public') sa WEB ROOT
Â  Â  Â  - name: ğŸ“¤ Upload Frontend Files (to public_html)
Â  Â  Â  Â  uses: SamKirkland/FTP-Deploy-Action@v4.3.5
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â  server: ${{ secrets.FTP_SERVER }}
Â  Â  Â  Â  Â  username: ${{ secrets.FTP_USERNAME }}
Â  Â  Â  Â  Â  password: ${{ secrets.FTP_PASSWORD }}
Â  Â  Â  Â  Â  port: ${{ secrets.FTP_PORT }}
Â  Â  Â  Â  Â  protocol: ftp
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  # Kukunin lang ang laman ng 'public' folder
Â  Â  Â  Â  Â  local-dir: public/
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  # I-a-upload sa 'public_html' (FTP_PATH)
Â  Â  Â  Â  Â  server-dir: ${{ secrets.FTP_PATH }}/
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  # Standard excludes
Â  Â  Â  Â  Â  exclude: |
Â  Â  Â  Â  Â  Â  **/.git*
Â  Â  Â  Â  Â  Â  **/.github*

